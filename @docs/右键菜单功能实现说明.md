# 右键菜单功能实现说明

## 功能概述

为PromptList组件的空白区域添加了右键菜单功能，用户可以通过右键点击列表空白处来快速访问常用操作，包括新建提示词、切换显示模式等。

## 实现细节

### 1. 技术方案

- 使用 `ContextMenu` 组件包装整个列表区域
- 右键菜单包含新建提示词、切换收藏/推荐模式等快捷操作
- 保持原有的卡片交互功能不变

### 2. 核心代码修改

#### 列表区域包装
```tsx
// 将整个列表区域包装在ContextMenu中
<ScrollArea className="flex-1">
  <ContextMenu>
    <ContextMenuTrigger asChild>
      <div className="p-4 min-h-full">
        {/* 原有的列表内容 */}
      </div>
    </ContextMenuTrigger>
    <ContextMenuContent>
      {/* 右键菜单内容 */}
    </ContextMenuContent>
  </ContextMenu>
</ScrollArea>
```

#### 右键菜单内容
```tsx
<ContextMenuContent>
  <ContextMenuItem onClick={() => setShowNewPromptDialog(true)}>
    <Icons.plus className="mr-2 h-4 w-4" />
    {t('common.create_prompt.title')}
  </ContextMenuItem>
  <ContextMenuItem onClick={() => setShowFavorites(!showFavorites)}>
    <Icons.star className="mr-2 h-4 w-4" />
    {showFavorites ? t('common.showAll') : t('common.showFavorites')}
  </ContextMenuItem>
  <ContextMenuItem onClick={() => setShowRecommended(!showRecommended)}>
    <Icons.fileText className="mr-2 h-4 w-4" />
    {showRecommended ? t('common.showAll') : t('common.showRecommended')}
  </ContextMenuItem>
</ContextMenuContent>
```

### 3. 菜单功能

#### 新建提示词
- **功能**: 打开新建提示词对话框
- **图标**: Plus图标
- **文本**: "新建提示词"
- **行为**: 调用 `setShowNewPromptDialog(true)`

#### 切换收藏模式
- **功能**: 在收藏模式和全部模式间切换
- **图标**: Star图标
- **文本**: 动态显示"显示收藏"或"显示全部"
- **行为**: 调用 `setShowFavorites(!showFavorites)`

#### 切换推荐模式
- **功能**: 在推荐模式和全部模式间切换
- **图标**: FileText图标
- **文本**: 动态显示"显示推荐"或"显示全部"
- **行为**: 调用 `setShowRecommended(!showRecommended)`

### 4. 样式特性

#### ContextMenuContent配置
- **默认样式**: 使用系统默认的右键菜单样式
- **位置**: 自动定位在鼠标右键点击位置
- **动画**: 内置淡入淡出动画效果
- **层级**: 自动处理z-index层级

#### 菜单项样式
- **图标**: 16x16px图标，与文本左对齐
- **间距**: 图标与文本间距8px
- **悬停**: 鼠标悬停时高亮显示
- **分隔**: 菜单项之间自动分隔

### 5. 交互体验

#### 触发方式
- **右键点击**: 在列表空白处右键点击显示菜单
- **自动隐藏**: 点击菜单外区域或按ESC键自动隐藏
- **键盘支持**: 支持键盘导航和屏幕阅读器

#### 功能集成
- **状态同步**: 菜单项文本根据当前状态动态更新
- **操作一致**: 菜单操作与界面其他操作保持一致
- **无冲突**: 不影响原有的卡片右键菜单功能

### 6. 多语言支持

#### 新增翻译
```json
// 中文翻译
{
  "showAll": "显示全部",
  "showFavorites": "显示收藏", 
  "showRecommended": "显示推荐"
}

// 英文翻译
{
  "showAll": "Show All",
  "showFavorites": "Show Favorites",
  "showRecommended": "Show Recommended"
}
```

#### 动态文本
- 菜单项文本根据当前状态动态切换
- 支持中英文双语显示
- 使用i18n系统统一管理

## 使用说明

### 基本操作
1. **打开菜单**: 在提示词列表空白处右键点击
2. **新建提示词**: 点击"新建提示词"菜单项
3. **切换模式**: 点击"显示收藏"或"显示推荐"切换显示模式
4. **关闭菜单**: 点击菜单外区域或按ESC键

### 适用场景
- **快速新建**: 无需点击顶部按钮，直接在列表区域右键新建
- **模式切换**: 快速在全部/收藏/推荐模式间切换
- **工作流优化**: 减少鼠标移动距离，提高操作效率

### 注意事项
- 菜单仅在列表空白处显示，不影响卡片上的右键菜单
- 菜单项状态会根据当前显示模式动态更新
- 支持键盘导航，符合无障碍访问标准

## 技术优势

1. **用户体验**: 提供便捷的右键快捷操作
2. **功能完整**: 包含最常用的操作选项
3. **状态感知**: 菜单项根据当前状态智能显示
4. **性能友好**: 不影响列表渲染和滚动性能
5. **无障碍**: 支持键盘导航和屏幕阅读器
6. **国际化**: 完整的多语言支持

## 后续优化建议

1. **自定义菜单**: 允许用户自定义右键菜单项
2. **快捷键支持**: 为菜单项添加键盘快捷键
3. **图标优化**: 使用更直观的图标表示不同功能
4. **分组显示**: 将相关功能分组显示
5. **动画增强**: 添加更丰富的动画效果
6. **移动端适配**: 为触摸设备优化长按菜单

## 文件修改记录

- **修改文件**: 
  - `src/components/PromptList.tsx` - 添加右键菜单功能
  - `src/i18n/locales/zh-CN.json` - 添加中文翻译
  - `src/i18n/locales/en-US.json` - 添加英文翻译
- **修改时间**: 2024年12月
- **修改内容**: 添加ContextMenu包装和菜单项
- **影响范围**: 仅影响列表空白区域，不影响卡片交互
