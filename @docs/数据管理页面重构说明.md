# 数据管理页面重构说明

## 重构概述

参考Cherry Studio的设置界面设计，对数据管理页面进行了全面重构，采用侧边栏导航 + 主内容区域的布局，为云同步功能预留了充足的扩展空间。

## 设计理念

### 1. Cherry Studio风格设计
- **侧边栏导航**: 左侧固定宽度的分类导航
- **主内容区域**: 右侧可滚动的内容展示区域
- **卡片式布局**: 使用Card组件组织不同功能模块
- **层次化信息**: 清晰的标题、描述和操作按钮层次

### 2. 扩展性设计
- **模块化结构**: 每个功能模块独立渲染
- **预留接口**: 为云同步功能预留完整的状态和UI
- **可配置选项**: 支持多种云服务提供商和同步策略

## 页面结构

### 侧边栏导航
```tsx
// 四个主要分类
enum SettingsCategory {
  CLOUD_SYNC = 'cloud-sync',        // 云同步
  DATA_MANAGEMENT = 'data-management', // 数据管理
  BACKUP_RESTORE = 'backup-restore',   // 备份恢复
  ADVANCED = 'advanced'                // 高级设置
}
```

#### 导航项设计
- **云同步**: 显示ON/OFF状态徽章
- **数据管理**: 传统的数据导入导出功能
- **备份恢复**: 自动和手动备份功能
- **高级设置**: 开发者选项和危险操作

### 主内容区域

#### 1. 云同步页面 (预留)
```tsx
// 云同步功能模块
- 云同步开关
- 云服务提供商选择 (Google Drive, Dropbox, OneDrive)
- 同步设置 (自动同步、同步间隔)
- 当前同步状态显示
```

**预留状态管理**:
```tsx
const [cloudSyncEnabled, setCloudSyncEnabled] = useState(false);
const [cloudProvider, setCloudProvider] = useState<'google' | 'dropbox' | 'onedrive' | null>(null);
const [autoSyncEnabled, setAutoSyncEnabled] = useState(false);
const [syncInterval, setSyncInterval] = useState<'realtime' | 'hourly' | 'daily'>('hourly');
```

#### 2. 数据管理页面
```tsx
// 数据统计卡片
- 总提示词数量
- 总分类数量  
- 总标签数量

// 数据操作卡片
- 导出数据按钮
- 导出提示词按钮
- 导入数据区域
- 文件选择功能
```

#### 3. 备份恢复页面
```tsx
// 自动备份设置
- 自动备份开关
- 备份策略配置

// 手动备份操作
- 生成备份按钮
- 下载备份按钮
- 备份预览区域
```

#### 4. 高级设置页面
```tsx
// 危险操作区域
- 重置为默认值按钮
- 警告提示信息

// 开发者选项
- 调试模式开关
- 详细日志开关
```

## 技术实现

### 1. 组件结构
```tsx
// 主要渲染函数
const renderContent = () => (
  <div className="flex h-full">
    {renderSidebar()}      // 侧边栏导航
    {renderMainContent()}  // 主内容区域
  </div>
);

// 分类内容渲染
const renderMainContent = () => (
  <div className="flex-1 p-6 space-y-6">
    {activeCategory === SettingsCategory.CLOUD_SYNC && renderCloudSyncContent()}
    {activeCategory === SettingsCategory.DATA_MANAGEMENT && renderDataManagementContent()}
    {activeCategory === SettingsCategory.BACKUP_RESTORE && renderBackupRestoreContent()}
    {activeCategory === SettingsCategory.ADVANCED && renderAdvancedContent()}
  </div>
);
```

### 2. 样式设计
```tsx
// 对话框尺寸
<DialogContent className="max-w-6xl h-[80vh] p-0">
  // 大尺寸对话框，支持侧边栏布局
  
// 侧边栏样式
<div className="w-64 border-r bg-muted/30 p-4 space-y-2">
  // 固定宽度，浅色背景，边框分隔
  
// 主内容区域
<div className="flex-1 p-6 space-y-6">
  // 弹性布局，内边距，垂直间距
```

### 3. 状态管理
```tsx
// 主要状态
const [activeCategory, setActiveCategory] = useState<SettingsCategory>(SettingsCategory.CLOUD_SYNC);

// 云同步状态（预留）
const [cloudSyncEnabled, setCloudSyncEnabled] = useState(false);
const [cloudProvider, setCloudProvider] = useState<'google' | 'dropbox' | 'onedrive' | null>(null);
const [autoSyncEnabled, setAutoSyncEnabled] = useState(false);
const [syncInterval, setSyncInterval] = useState<'realtime' | 'hourly' | 'daily'>('hourly');
```

## 多语言支持

### 新增翻译字段
```json
// 中文翻译
{
  "cloudSync": "云同步",
  "dataManagement": "数据管理", 
  "backupRestore": "备份恢复",
  "advanced": "高级设置",
  "cloudSyncDescription": "将您的数据同步到云端，实现多设备访问",
  "enableCloudSync": "启用云同步",
  "cloudProvider": "云服务提供商",
  "syncSettings": "同步设置",
  "autoSync": "自动同步",
  "syncInterval": "同步间隔",
  "realtime": "实时",
  "hourly": "每小时", 
  "daily": "每日",
  "dataStatistics": "数据统计",
  "totalPrompts": "总提示词",
  "totalCategories": "总分类",
  "totalTags": "总标签",
  "dataOperations": "数据操作",
  "autoBackup": "自动备份",
  "manualBackup": "手动备份",
  "dangerousOperations": "危险操作",
  "developerOptions": "开发者选项",
  "debugMode": "调试模式",
  "verboseLogging": "详细日志"
}

// 英文翻译
{
  "cloudSync": "Cloud Sync",
  "dataManagement": "Data Management",
  "backupRestore": "Backup & Restore", 
  "advanced": "Advanced",
  "cloudSyncDescription": "Sync your data to the cloud for multi-device access",
  "enableCloudSync": "Enable Cloud Sync",
  "cloudProvider": "Cloud Provider",
  "syncSettings": "Sync Settings",
  "autoSync": "Auto Sync",
  "syncInterval": "Sync Interval",
  "realtime": "Real-time",
  "hourly": "Hourly",
  "daily": "Daily",
  "dataStatistics": "Data Statistics",
  "totalPrompts": "Total Prompts",
  "totalCategories": "Total Categories", 
  "totalTags": "Total Tags",
  "dataOperations": "Data Operations",
  "autoBackup": "Auto Backup",
  "manualBackup": "Manual Backup",
  "dangerousOperations": "Dangerous Operations",
  "developerOptions": "Developer Options",
  "debugMode": "Debug Mode",
  "verboseLogging": "Verbose Logging"
}
```

## 图标扩展

### 新增图标
```tsx
// 添加到 Icons 组件
import {
  Cloud,      // 云同步
  Database,   // 数据库
  Archive,    // 归档/备份
  Globe,      // Google服务 (使用Globe图标)
  HardDrive,  // Dropbox服务 (使用HardDrive图标)
  Server      // Microsoft服务 (使用Server图标)
} from "lucide-react";

export const Icons = {
  // ... 现有图标
  cloud: Cloud,
  database: Database,
  archive: Archive,
  google: Globe,
  dropbox: HardDrive,
  microsoft: Server
};
```

## 云同步功能预留

### 1. UI组件预留
- **云服务选择**: 三个主要云服务提供商的按钮
- **同步设置**: 自动同步开关和间隔选择
- **状态显示**: 实时同步状态和最后同步时间
- **冲突处理**: 同步冲突解决界面

### 2. 状态管理预留
```tsx
// 云同步相关状态
const [cloudSyncEnabled, setCloudSyncEnabled] = useState(false);
const [cloudProvider, setCloudProvider] = useState<'google' | 'dropbox' | 'onedrive' | null>(null);
const [autoSyncEnabled, setAutoSyncEnabled] = useState(false);
const [syncInterval, setSyncInterval] = useState<'realtime' | 'hourly' | 'daily'>('hourly');
```

### 3. 功能接口预留
- **云服务认证**: OAuth认证流程
- **数据同步**: 双向数据同步逻辑
- **冲突解决**: 数据冲突检测和解决
- **状态监控**: 同步状态实时更新

## 用户体验优化

### 1. 视觉层次
- **清晰分类**: 侧边栏导航明确分类
- **状态指示**: 云同步状态徽章显示
- **操作反馈**: 按钮状态和加载指示
- **警告提示**: 危险操作的明确警告

### 2. 交互设计
- **一键操作**: 大按钮便于点击
- **状态切换**: 开关组件直观操作
- **文件拖拽**: 支持文件拖拽上传
- **实时预览**: 数据预览和确认

### 3. 响应式设计
- **大屏适配**: 6xl宽度支持大屏幕
- **高度自适应**: 80vh高度充分利用空间
- **滚动优化**: 内容区域独立滚动
- **移动端友好**: 保持移动端兼容性

## 后续开发计划

### 1. 云同步功能实现
- [ ] Google Drive API集成
- [ ] Dropbox API集成  
- [ ] OneDrive API集成
- [ ] 数据同步逻辑实现
- [ ] 冲突解决机制

### 2. 功能增强
- [ ] 数据统计实时更新
- [ ] 自动备份策略配置
- [ ] 批量操作功能
- [ ] 数据验证和修复

### 3. 用户体验
- [ ] 操作引导和帮助
- [ ] 快捷键支持
- [ ] 主题适配
- [ ] 无障碍访问优化

## 文件修改记录

- **修改文件**: 
  - `src/components/DataImportExport.tsx` - 完全重构页面布局
  - `src/components/ui/icons.tsx` - 添加新图标
  - `src/i18n/locales/zh-CN.json` - 添加中文翻译
  - `src/i18n/locales/en-US.json` - 添加英文翻译
- **修改时间**: 2024年12月
- **修改内容**: 参考Cherry Studio设计重构数据管理页面
- **影响范围**: 数据管理功能界面，为云同步功能预留空间
