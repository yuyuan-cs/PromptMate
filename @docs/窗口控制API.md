# 窗口控制API

## 概述

本文档描述了PromptMate应用中窗口控制相关的API和功能。

## 主要功能

### 窗口置顶
- 支持将应用窗口设置为"总在最前"
- 可通过设置面板开启/关闭此功能

### 全局快捷键
- 支持自定义全局快捷键唤出应用
- 默认快捷键：CommandOrControl+Alt+P

### 窗口管理
- 自定义标题栏
- 最小化、最大化、关闭按钮
- 支持拖拽移动窗口

## 技术实现

### Electron主进程
- 使用Electron的BrowserWindow API
- 支持窗口置顶和全局快捷键注册

### 渲染进程
- React组件管理窗口状态
- 通过IPC与主进程通信

## 更新记录

### 2024-12-19
- 修复新建提示词逻辑：新建提示词时，需要识别当前选择的分类文件夹，分类文件夹需为当前默认设置的文件夹
- 修改了Sidebar.tsx和PromptList.tsx中的新建提示词对话框逻辑
- 确保在打开新建提示词对话框时，分类选择器默认显示当前选中的分类
- 修复了对话框关闭和创建成功后重置分类的逻辑

### 2024-12-19 (第二次更新)
- 优化分类文件夹图标显示bug：修复了侧边栏与分类管理中图标不一致的问题
- 统一了图标显示逻辑，确保所有地方使用相同的图标组件和图标源
- 为图标选择器添加了翻页功能，支持分页浏览大量图标
- 为图标选择器添加了搜索功能，方便快速查找图标
- 优化了图标选择器的用户体验，包括悬停效果和过渡动画
- 修复了CategoryIcon组件，使其与getIconComponent函数保持一致
- 简化了Sidebar.tsx中的图标选择逻辑，统一使用IconSelector组件

### 2024-12-19 (第三次更新)
- 优化主题设置：深色模式基于自定义主题修改颜色，变为深色模式，而不是深色模式即黑白
- 实现了智能深色化算法，能够基于浅色主题的颜色进行智能的深色化处理
- 添加了颜色处理工具函数：darkenColor、lightenColor、adjustContrast等
- 优化了自定义主题的深色模式处理，确保颜色过渡自然
- 改进了预设主题的深色模式，所有非默认主题都使用智能深色化处理
- 移除了固定的深色模式变量，改为动态计算深色模式颜色
- 确保深色模式下的对比度和可读性，提供更好的用户体验

### 2024-12-19 (第四次更新)
- 优化版本管理和更新检查功能：能够识别当前版本并与GitHub最新发布进行对比更新
- 集成了GitHub API，实时获取最新发布版本信息
- 实现了智能版本比较算法，支持语义化版本号比较
- 添加了更新类型识别（主版本、次版本、补丁更新）
- 优化了About组件界面，显示更详细的版本信息和更新状态
- 添加了GitHub发布详情链接，用户可直接查看更新内容
- 改进了更新检查的用户体验，包括进度提示和错误处理
- 添加了应用详细信息显示，包括构建日期、Electron版本等
- 更新了package.json配置，添加了homepage、repository等字段
- 版本号更新至1.0.2，为后续发布做准备

### 2024-12-19 (第五次更新)
- 实现自动版本管理功能：打包时自动更新版本号
- 创建了版本管理脚本（scripts/version-manager.js），支持语义化版本控制
- 添加了多种版本更新命令：version:patch、version:minor、version:major
- 实现了一键发布功能：release:patch、release:minor、release:major等
- 自动更新构建日期和CHANGELOG.md文件
- 自动创建Git标签和提交更改
- 支持Windows、macOS和全平台发布
- 添加了详细的使用说明文档（scripts/README.md）
- 版本号更新至1.0.3，完善了版本管理流程

### 2024-12-19 (第六次更新)
- 实现完整的自动化发布功能：自动更新、打包并发布至GitHub Release
- 创建了自动化发布脚本（scripts/release-manager.js），支持直接发布到GitHub
- 创建了快速发布脚本（scripts/quick-release.js），利用GitHub Actions自动构建
- 创建了简化发布脚本（scripts/simple-release.js），跳过本地构建直接推送
- 添加了GitHub Actions工作流（.github/workflows/release.yml），实现CI/CD自动化
- 支持三种发布方式：简化发布（推荐）、快速发布和本地发布
- 自动创建GitHub Release并上传构建产物
- 自动生成发布说明和更新日志
- 支持多平台构建（Windows、macOS）
- 添加了详细的发布指南（scripts/RELEASE_GUIDE.md）
- 完善了npm脚本命令，支持一键发布
- 实现了完整的DevOps自动化流程
- 版本号更新至1.0.9，成功测试了自动化发布流程 